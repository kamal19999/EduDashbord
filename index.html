<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EduDashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
    <!-- SheetJS (js-xlsx) for Excel export -->
    <script src="https://cdn.sheetjs.com/xlsx-0.20.2/package/dist/xlsx.full.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>


<body class="bg-slate-50 text-slate-800">

    <button id="helpBtn" class="absolute top-4 left-4 text-blue-600 hover:text-blue-800 flex items-center space-x-2">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 14h.01M16 10h.01M12 18h.01M12 6h.01" />
        </svg>
        <span class="text-sm font-medium">ุชุนูููุงุช</span>
    </button>

    <div class="container mx-auto p-4 md:p-8">

        <div class="w-full">
            <header class="text-center mb-4">
                <h1 class="text-3xl md:text-4xl font-bold text-slate-700">ููุญุฉ ุชูุงุนููุฉ ูุชุญููู ุงูุจูุงูุงุช ุงูุชุนููููุฉ</h1>
                <p class="text-slate-500 mt-2">ุชุญููู ููุฑู ุชูุงุนูู ููุชุงุฆุฌ ุงูุทูุงุจ ูุฃุฏุงุฆูู ูู ูุฎุชูู ุงูููุงุฏ ูุงููุฑุงุญู ุงูุฏุฑุงุณูุฉ.</p>
            </header>
        </div>

    <div class="sticky top-6 right-12 z-50 flex flex-col items-end gap-2 bg-white/80 backdrop-blur-md rounded-xl shadow-lg p-4 border border-slate-200" style="max-width: 300px;">
    <label class="block text-teal-700 mb-1">ูุฑุฌู ุฑูุน ููู ุฏุฑุฌุงุช ุงูุทูุงุจ ููุง ูุชุญููููุง</label>
    <div class="relative w-full">
        <input type="file" id="csvUpload" accept=".csv" class="block text-sm text-slate-500 mb-2 cursor-pointer w-full border border-teal-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition" />
        <div id="csvStatusMsg" class="mt-2 w-full text-center text-sm rounded-lg py-2 transition-all duration-300" style="display:none;"></div>
    <div id="csvTooltip" class="absolute right-0 mt-2 w-80 bg-slate-100 rounded-lg p-3 text-xs text-slate-600 shadow-lg opacity-0 transition-opacity pointer-events-none border border-teal-200" style="white-space:normal;">
            <span class="font-semibold text-teal-700">ููุงุญุธุฉ ูููุฉ:</span>  ูุฌุจ ุฃู ูููู ููุน ุงูููู ุงูุณู ุจุตูุบุฉ <span class="font-mono bg-slate-200 px-1 rounded">CSV</span> ูุชููู ุงูุจูุงูุงุช ูุธููุฉ ูุง ููุฌุฏ ูููุง ุงุฎุทุงุกุ ููููู ููู ุนููุฏ ุนููุงู ูุงุถุญุ ูู ุฃูู ุตู ูุซู (ุงุณู ุงูุทุงูุจุ ุงูุตูุ ุงููุณูุุุงููุณุจุฉุุงุณูุงุก ุงูููุงุฏ ุงูุฏุฑุงุณูุฉ ..) ุญุชู ุชุชู ุนูููุฉ ุงูุชุญููู ุจูุฌุงุญ..ูุดูุฑุงู<br>
        </div>
        </div>
    </div>

        <div class="bg-white p-4 rounded-xl shadow-md mb-8 sticky top-4 z-10">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 items-center">
                <div class="md:col-span-1">
                    <h2 class="text-lg text-center font-semibold text-slate-600">ุฎูุงุฑุงุช ุงูุชุตููุฉ</h2>
                </div>
                <div class="md:col-span-2 flex flex-wrap items-end gap-4">
                    <div class="flex-1 min-w-[150px] relative">
                        <label for="gradeFilter" class="block text-sm font-medium text-slate-500 mb-1">ุงูุตู ุงูุฏุฑุงุณู</label>
                        <button id="gradeFilterToggle" class="w-full p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition text-right flex justify-between items-center">
                            <span id="gradeFilterDisplay">ุงููู</span>
                            <svg class="w-4 h-4 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div id="gradeFilterDropdown" class="absolute z-20 w-full bg-white border border-slate-300 rounded-lg shadow-lg mt-1 hidden max-h-60 overflow-y-auto">
                            <div class="p-2">
                                <label class="flex items-center px-2 py-1 hover:bg-slate-100 rounded-md cursor-pointer">
                                    <input type="checkbox" value="ุงููู" class="form-checkbox h-4 w-4 text-teal-600 rounded focus:ring-teal-500" checked>
                                    <span class="mr-2 text-sm text-slate-700">ุงููู</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="flex-1 min-w-[150px] relative">
                        <label for="sectionFilter" class="block text-sm font-medium text-slate-500 mb-1">ุงููุณู</label>
                        <button id="sectionFilterToggle" class="w-full p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition text-right flex justify-between items-center">
                            <span id="sectionFilterDisplay">ุงููู</span>
                            <svg class="w-4 h-4 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div id="sectionFilterDropdown" class="absolute z-20 w-full bg-white border border-slate-300 rounded-lg shadow-lg mt-1 hidden max-h-60 overflow-y-auto">
                            <div class="p-2">
                                <label class="flex items-center px-2 py-1 hover:bg-slate-100 rounded-md cursor-pointer">
                                    <input type="checkbox" value="ุงููู" class="form-checkbox h-4 w-4 text-teal-600 rounded focus:ring-teal-500" checked>
                                    <span class="mr-2 text-sm text-slate-700">ุงููู</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="flex-1 min-w-[150px]">
                        <label for="levelFilter" class="block text-sm font-medium text-slate-500 mb-1">ุงููุณุชูู</label>
                        <select id="levelFilter" class="w-full p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition">
                            <option value="ุงููู">ุงููู</option>
                            <option value="top10">ุฃุนูู ุนุดุฑุฉ</option>
                            <option value="bottom10">ุฃุฏูู ุนุดุฑุฉ</option>
                        </select>
                    </div>
                    <div class="flex-1 min-w-[150px] relative">
                        <label for="categoryFilter" class="block text-sm font-medium text-slate-500 mb-1">ูุฆุฉ ุงูุชูุฏูุฑ</label>
                        <button id="categoryFilterToggle" class="w-full p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition text-right flex justify-between items-center">
                            <span id="categoryFilterDisplay">ุงููู</span>
                            <svg class="w-4 h-4 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div id="categoryFilterDropdown" class="absolute z-20 w-full bg-white border border-slate-300 rounded-lg shadow-lg mt-1 hidden max-h-60 overflow-y-auto">
                            <div class="p-2">
                                <label class="flex items-center px-2 py-1 hover:bg-slate-100 rounded-md cursor-pointer">
                                    <input type="checkbox" value="ุงููู" class="form-checkbox h-4 w-4 text-teal-600 rounded focus:ring-teal-500" checked>
                                    <span class="mr-2 text-sm text-slate-700">ุงููู</span>
                                </label>
                                <label class="flex items-center px-2 py-1 hover:bg-slate-100 rounded-md cursor-pointer">
                                    <input type="checkbox" value="ููุชุงุฒ" class="form-checkbox h-4 w-4 text-teal-600 rounded focus:ring-teal-500">
                                    <span class="mr-2 text-sm text-slate-700">ููุชุงุฒ</span>
                                </label>
                                <label class="flex items-center px-2 py-1 hover:bg-slate-100 rounded-md cursor-pointer">
                                    <input type="checkbox" value="ุฌูุฏ ุฌุฏุงู" class="form-checkbox h-4 w-4 text-teal-600 rounded focus:ring-teal-500">
                                    <span class="mr-2 text-sm text-slate-700">ุฌูุฏ ุฌุฏุงู</span>
                                </label>
                                <label class="flex items-center px-2 py-1 hover:bg-slate-100 rounded-md cursor-pointer">
                                    <input type="checkbox" value="ุฌูุฏ" class="form-checkbox h-4 w-4 text-teal-600 rounded focus:ring-teal-500">
                                    <span class="mr-2 text-sm text-slate-700">ุฌูุฏ</span>
                                </label>
                                <label class="flex items-center px-2 py-1 hover:bg-slate-100 rounded-md cursor-pointer">
                                    <input type="checkbox" value="ููุจูู" class="form-checkbox h-4 w-4 text-teal-600 rounded focus:ring-teal-500">
                                    <span class="mr-2 text-sm text-slate-700">ููุจูู</span>
                                </label>
                                <label class="flex items-center px-2 py-1 hover:bg-slate-100 rounded-md cursor-pointer">
                                    <input type="checkbox" value="ุถุนูู" class="form-checkbox h-4 w-4 text-teal-600 rounded focus:ring-teal-500">
                                    <span class="mr-2 text-sm text-slate-700">ุถุนูู</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="flex-1 min-w-[150px] relative">
                        <label for="subjectFilter" class="block text-sm font-medium text-slate-500 mb-1">ุงููุงุฏุฉ ุงูุฏุฑุงุณูุฉ</label>
                        <button id="subjectFilterToggle" class="w-full p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition text-right flex justify-between items-center">
                            <span id="subjectFilterDisplay">ุงููู</span>
                            <svg class="w-4 h-4 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div id="subjectFilterDropdown" class="absolute z-20 w-full bg-white border border-slate-300 rounded-lg shadow-lg mt-1 hidden max-h-60 overflow-y-auto">
                            <div class="p-2">
                                <label class="flex items-center px-2 py-1 hover:bg-slate-100 rounded-md cursor-pointer">
                                    <input type="checkbox" value="ุงููู" class="form-checkbox h-4 w-4 text-teal-600 rounded focus:ring-teal-500" checked>
                                    <span class="mr-2 text-sm text-slate-700">ุงููู</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="flex-1 min-w-[150px] relative">
                        <label for="timeFilter" class="block text-sm font-medium text-slate-500 mb-1">ููุน ุงูุชุญููู</label>
                        <button id="timeFilterToggle" class="w-full p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition text-right flex justify-between items-center">
                            <span id="timeFilterDisplay">ุงููู</span>
                            <svg class="w-4 h-4 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div id="timeFilterDropdown" class="absolute z-20 w-full bg-white border border-slate-300 rounded-lg shadow-lg mt-1 hidden max-h-60 overflow-y-auto">
                            <div class="p-2">
                                <label class="flex items-center px-2 py-1 hover:bg-slate-100 rounded-md cursor-pointer">
                                    <input type="checkbox" value="ุงููู" class="form-checkbox h-4 w-4 text-teal-600 rounded focus:ring-teal-500" checked>
                                    <span class="mr-2 text-sm text-slate-700">ุงููู</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="flex-1 min-w-[150px]">
                        <label for="searchInput" class="block text-sm font-medium text-slate-500 mb-1">ุจุญุซ</label>
                        <input type="text" id="searchInput" placeholder="ุงุจุญุซ ุนู ุทุงูุจ..." class="w-full p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition">
                    </div>
                    <button id="resetFiltersBtn" class="bg-slate-100 text-red-500 py-2 px-4 rounded-lg hover:bg-slate-200 transition-colors shadow flex items-center gap-1 text-sm">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-red-300" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                         <path stroke-linecap="round" stroke-linejoin="round" d="M3 4h18M6 8l6 6v4l-4 2v-6l-6-6m12 0l3 3m0-3l-3 3" />
                        </svg>
                              <span>ุฅูุบุงุก ุงูุชุตููุฉ</span>
                    </button>
                </div>
            </div>
        </div>

        <main>
            <section id="stats-cards" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <div class="bg-white p-6 rounded-xl shadow-md flex items-center gap-4">
                    <div class="bg-teal-100 p-3 rounded-full">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-teal-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" /></svg>
                    </div>
                    <div>
                        <h3 class="text-slate-500 text-sm font-medium">ุฅุฌูุงูู ุงูุทูุงุจ</h3>
                        <p id="totalStudents" class="text-3xl font-bold text-slate-700">0</p>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-md flex items-center gap-4">
                    <div class="bg-sky-100 p-3 rounded-full">
                         <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-sky-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                    </div>
                    <div>
                        <h3 class="text-slate-500 text-sm font-medium">ูุชูุณุท ุงูุชูุฏูุฑ ุงูุนุงู</h3>
                        <p id="averageScore" class="text-3xl font-bold text-slate-700">0</p>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-md flex items-center gap-4">
                    <div class="bg-amber-100 p-3 rounded-full">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-amber-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z" /></svg>
                    </div>
                    <div>
                        <h3 class="text-slate-500 text-sm font-medium">ุฃุนูู ูุงุฏุฉ ุฃุฏุงุกู</h3>
                        <p id="topSubject" class="text-xl font-bold text-slate-700">-</p>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-md flex items-center gap-4">
                    <div class="bg-rose-100 p-3 rounded-full">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-rose-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 17h8m-8-8h8m-8 4h8M3 21h4M3 17h4M3 13h4M3 9h4M3 5h4" /></svg>
                    </div>
                    <div>
                        <h3 class="text-slate-500 text-sm font-medium">ุฃูู ูุงุฏุฉ ุฃุฏุงุกู</h3>
                        <p id="bottomSubject" class="text-xl font-bold text-slate-700">-</p>
                    </div>
                </div>
                <!-- New Card: Top Performing Student -->
                <div class="bg-white p-6 rounded-xl shadow-md flex items-center gap-4">
                    <div class="bg-green-100 p-3 rounded-full">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 11l3-3m0 0l3 3m-3-3v8m0-13a9 9 0 110 18 9 9 0 010-18z" />
                        </svg>
                    </div>
                    <div>
                        <h3 class="text-slate-500 text-sm font-medium">ุฃุนูู ุทุงูุจ ุฃุฏุงุกู</h3>
                        <p id="topStudentName" class="text-xl font-bold text-slate-700">-</p>
                        <p id="topStudentScore" class="text-sm text-slate-500"></p>
                    </div>
                </div>
                <!-- New Card: Bottom Performing Student -->
                <div class="bg-white p-6 rounded-xl shadow-md flex items-center gap-4">
                    <div class="bg-red-100 p-3 rounded-full">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-red-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13l-3 3m0 0l-3-3m3 3V8m0 13a9 9 0 110-18 9 9 0 010 18z" />
                        </svg>
                    </div>
                    <div>
                        <h3 class="text-slate-500 text-sm font-medium">ุฃุฏูู ุทุงูุจ ุฃุฏุงุกู</h3>
                        <p id="bottomStudentName" class="text-xl font-bold text-slate-700">-</p>
                        <p id="bottomStudentScore" class="text-sm text-slate-500"></p>
                    </div>
                </div>
                <!-- New Card: Top Performing Class -->
                <div class="bg-white p-6 rounded-xl shadow-md flex items-center gap-4">
                    <div class="bg-blue-100 p-3 rounded-full">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" />
                        </svg>
                    </div>
                    <div>
                        <h3 class="text-slate-500 text-sm font-medium">ุฃุนูู ุตู ุฃุฏุงุกู</h3>
                        <p id="topClass" class="text-xl font-bold text-slate-700">-</p>
                        <p id="topClassScore" class="text-sm text-slate-500"></p>
                    </div>
                </div>
                <!-- New Card: Bottom Performing Class -->
                <div class="bg-white p-6 rounded-xl shadow-md flex items-center gap-4">
                    <div class="bg-purple-100 p-3 rounded-full">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-purple-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" />
                        </svg>
                    </div>
                    <div>
                        <h3 class="text-slate-500 text-sm font-medium">ุฃุฏูู ุตู ุฃุฏุงุกู</h3>
                        <p id="bottomClass" class="text-xl font-bold text-slate-700">-</p>
                        <p id="bottomClassScore" class="text-sm text-slate-500"></p>
                    </div>
                </div>
            </section>

            <section class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <h2 class="text-xl font-bold text-slate-700 mb-4">ูุชูุณุท ุงูุฃุฏุงุก ุญุณุจ ุงููุงุฏุฉ</h2>
                    <p class="text-sm text-slate-500 mb-4">ููุงุฑู ูุฐุง ุงูุฑุณู ุงูุจูุงูู ูุชูุณุท ุฏุฑุฌุงุช ุงูุทูุงุจ ูู ุฌููุน ุงูููุงุฏ ุงูุฏุฑุงุณูุฉ. ููููู ุงุณุชุฎุฏุงูู ูุชุญุฏูุฏ ููุงุท ุงูููุฉ ูุงูุถุนู ุงูุนุงูุฉ ูู ุงูุฃุฏุงุก ุงูุฃูุงุฏููู.</p>
                    <div class="chart-container flex flex-col items-center gap-2">
                        <canvas id="subjectAverageChart"></canvas>
                        <button id="exportSubjectChartBtn" class="mt-3 bg-teal-500 text-white py-1 px-3 rounded-md hover:bg-teal-600 transition-colors shadow flex items-center gap-1 text-xs">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd" />
                            </svg>
                            <span>ุชุตุฏูุฑ ุงูุฑุณู</span>
                        </button>
                    </div>
                </div>
                
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <h2 class="text-xl font-bold text-slate-700 mb-4">ุชูุฒูุน ุงูุชูุฏูุฑุงุช</h2>
                     <p class="text-sm text-slate-500 mb-4">ููุถุญ ูุฐุง ุงูุฑุณู ูุณุจุฉ ุงูุทูุงุจ ุถูู ูู ูุฆุฉ ูู ูุฆุงุช ุงูุชูุฏูุฑ (ููุชุงุฒุ ุฌูุฏ ุฌุฏุงูุ ุฅูุฎ)ุ ููุง ูุนุทู ููุญุฉ ุณุฑูุนุฉ ุนู ูุณุชูู ุงูุฃุฏุงุก ุงูุนุงู.</p>
                    <div class="chart-container flex flex-col items-center gap-2">
                        <canvas id="gradeDistributionChart"></canvas>
                        <button id="exportGradeChartBtn" class="mt-3 bg-teal-500 text-white py-1 px-3 rounded-md hover:bg-teal-600 transition-colors shadow flex items-center gap-1 text-xs">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd" />
                            </svg>
                            <span>ุชุตุฏูุฑ ุงูุฑุณู</span>
                        </button>
                    </div>
                </div>


                <!-- New Chart: Student Distribution by Grade -->
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <h2 class="text-xl font-bold text-slate-700 mb-4">ุชูุฒูุน ุงูุทูุงุจ ุญุณุจ ุงูุตู ุงูุฏุฑุงุณู</h2>
                    <p class="text-sm text-slate-500 mb-4">ููุถุญ ูุฐุง ุงููุฎุทุท ุงูุฏุงุฆุฑู ุชูุฒูุน ุงูุทูุงุจ ููุณุจุชูู ุงููุฆููุฉ ููู ุตู ุฏุฑุงุณู.</p>
                    <div class="chart-container flex flex-col items-center gap-2">
                        <canvas id="gradeStudentDistributionChart"></canvas>
                        <button id="exportGradeStudentDistributionChartBtn" class="mt-3 bg-teal-500 text-white py-1 px-3 rounded-md hover:bg-teal-600 transition-colors shadow flex items-center gap-1 text-xs">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd" />
                            </svg>
                            <span>ุชุตุฏูุฑ ุงูุฑุณู</span>
                        </button>
                    </div>
                </div>


                <!-- New Chart: Average Grades by Class -->
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <h2 class="text-xl font-bold text-slate-700 mb-4">ูุชูุณุท ุฏุฑุฌุงุช ุงูุทูุงุจ ุญุณุจ ุงูุตู</h2>
                    <p class="text-sm text-slate-500 mb-4">ููุงุฑู ูุฐุง ุงููุฎุทุท ุงูุจูุงูู ูุชูุณุท ุฏุฑุฌุงุช ุงูุทูุงุจ ูู ูุฎุชูู ุงูุตููู ุงูุฏุฑุงุณูุฉ.</p>
                    <div class="chart-container flex flex-col items-center gap-2">
                        <canvas id="averageGradeByClassChart"></canvas>
                        <button id="exportAverageGradeByClassChartBtn" class="mt-3 bg-teal-500 text-white py-1 px-3 rounded-md hover:bg-teal-600 transition-colors shadow flex items-center gap-1 text-xs">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd" />
                            </svg>
                            <span>ุชุตุฏูุฑ ุงูุฑุณู</span>
                        </button>
                    </div>
                </div>
            </section>

            <section class="bg-white p-6 rounded-xl shadow-md">
                <div class="flex items-center justify-between mb-4">
                    <h2 id="studentsTableTitle" class="text-xl font-bold text-slate-700">ูุงุฆูุฉ ุงูุทูุงุจ ูุงูุฏุฑุฌุงุช</h2>
                    <button id="downloadExcelBtn" class="bg-teal-500 text-white py-1 px-3 rounded-md hover:bg-teal-600 transition-colors shadow flex items-center gap-1 text-xs">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd" />
                        </svg>
                        <span>ุชุตุฏูุฑ ุฅูู Excel</span>
                    </button>
                </div>
                <p class="text-sm text-slate-500 mb-4">ููุง ููููู ุงูุงุทูุงุน ุนูู ุงูุฏุฑุฌุงุช ุงูุชูุตูููุฉ ููู ุทุงูุจ ุจูุงุกู ุนูู ุฎูุงุฑุงุช ุงูุชุตููุฉ ุงููุญุฏุฏุฉ. ุงุณุชุฎุฏู ูุฐุง ุงูุฌุฏูู ููุฑุงุฌุนุฉ ุฃุฏุงุก ุงูุทูุงุจ .</p>
                <div class="overflow-x-auto">
                    <table class="w-full text-sm text-right text-slate-500">
                        <thead class="text-xs text-slate-700 uppercase bg-slate-100">
                            <tr>
                                <th scope="col" class="px-2 py-2 whitespace-nowrap">ุงูุชุฑุชูุจ</th>
                                <th scope="col" class="px-3 py-2 whitespace-nowrap">ุงุณู ุงูุทุงูุจ</th>
                                <th scope="col" class="px-2 py-2 whitespace-nowrap">ุงูุตู</th>
                                <th scope="col" class="px-2 py-2 whitespace-nowrap">ุงููุณู</th>
                                <th scope="col" class="px-1 py-2 whitespace-nowrap">ุงููุฑุขู</th>
                                <th scope="col" class="px-1 py-2 whitespace-nowrap">ุงูุงุณูุงููุฉ</th>
                                <th scope="col" class="px-1 py-2 whitespace-nowrap">ุงูุนุฑุจู</th>
                                <th scope="col" class="px-1 py-2 whitespace-nowrap">ุงูุฅูุฌููุฒู</th>
                                <th scope="col" class="px-1 py-2 whitespace-nowrap">ุงูุฑูุงุถูุงุช</th>
                                <th scope="col" class="px-1 py-2 whitespace-nowrap">ุงูุนููู</th>
                                <th scope="col" class="px-1 py-2 whitespace-nowrap">ุงูุงุฌุชูุงุนูุงุช</th>
                                <th scope="col" class="px-1 py-2 whitespace-nowrap">ุงูููุฒูุงุก</th>
                                <th scope="col" class="px-1 py-2 whitespace-nowrap">ุงูููููุงุก</th>
                                <th scope="col" class="px-1 py-2 whitespace-nowrap">ุงูุฃุญูุงุก</th>
                                <th scope="col" class="px-1 py-2 whitespace-nowrap">ุงูุฌุบุฑุงููุง</th>
                                <th scope="col" class="px-1 py-2 whitespace-nowrap">ุงูุชุงุฑูุฎ</th>
                                <th scope="col" class="px-1 py-2 whitespace-nowrap">ุงููุฌุชูุน</th>
                                <th scope="col" class="px-1 py-2 whitespace-nowrap">ุณููู</th>
                                <th scope="col" class="px-2 py-2 whitespace-nowrap">ุงูุชูุฏูุฑ</th>
                            </tr>
                        </thead>
                        <tbody id="studentsTableBody">
                        </tbody>
                    </table>
                </div>
            </section>
        </main>
       
        <footer class="text-center mb-2">
            <p class="text-slate-500 mt-2"> ุญููู ุงูููููุฉ @ ูููุงู ุงูุฎุทุงุจู_781414133</p>
        </footer><br><br>
      

    </div>

    <script src="main.js"></script>

    <div id="helpModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-[100]">
        <div class="bg-white p-6 rounded-lg max-w-lg w-full shadow-lg overflow-y-auto max-h-[80vh]">
            <h2 class="text-xl font-bold mb-6">๐ ุชุนูููุงุช ุงูุงุณุชุฎุฏุงู</h2>
            <ol class="list-decimal pl-5 space-y-2 text-sm">
  <li>
    ุฌููุฒ ุจูุงูุงุชู ูู ููู Excel ุจุญูุซ ูุญุชูู ุงูุตู ุงูุฃุนูู ุนูู ุนูุงููู ูุงุถุญุฉ ูุซู:  
    <span class="font-mono bg-slate-100 px-1 rounded">ุงุณู ุงูุทุงูุจุ ุงูุตูุ ุงููุณูุ ุฃุณูุงุก ุงูููุงุฏุุงููุณุจุฉุููุน ุงูุชุญููู</span>.  
    ูุฌุจ ุฃู ุชููู ุงูุฏุฑุฌุงุช ูู 100ุ ูุงููุณุจุฉ ูุญุณูุจุฉ ุจุญุณุจ ุงููุชูุณุท ุงูุญุณุงุจู.  
    ููููู ุชุญููู ูุงูุจ ููุชุฑุญ ูุฅุฏุฎุงู ุงูุฏุฑุฌุงุช ูุงูุจูุงูุงุช ููู ูู ููุง:  
    <a href="https://docs.google.com/spreadsheets/d/10c3PvB8g6WpXrQBaHW0OB8v0yJFqSDc8/export?format=xlsx" target="_blank" class="text-blue-600 underline">๐ฅ ุชุญููู ูุงูุจ Excel ุงูููุชุฑุญ</a>  
    ุซู ุงุญูุธ ุงูููู ุจุตูุบุฉ <span class="font-mono bg-slate-200 px-1 rounded">CSV</span>.
  </li>
  
  <li>ุงุจุฏุฃ ุจุฑูุน ููู ุงูุฏุฑุฌุงุช ุจุตูุบุฉ <span class="font-mono bg-slate-200 px-1 rounded">CSV</span> ูู ุฎูุงู ุฒุฑ "ุฑูุน ููู ุฏุฑุฌุงุช ุงูุทูุงุจ".</li>
  <li>ุงุณุชุฎุฏู ุงูููุงุชุฑ ูุงุฎุชูุงุฑ ุงูุตูุ ุงููุงุฏุฉุ ูุงููุณู ูุบูุฑู ูู ุนูุงูู ุงูุชุตููุฉ .</li>
  <li>ููููู ุชุญุฏูุฏ ุฃูุซุฑ ูู ุฎูุงุฑ ูู ูู ููุชุฑ ุจุงุณุชุฎุฏุงู ุงูููุงุฆู ุงูููุณุฏูุฉ ูุชุนุฏุฏุฉ ุงูุงุฎุชูุงุฑุงุช.</li>
  <li>ููููู ุชุตุฏูุฑ ุงูุฑุณู ุงูุจูุงูู ูุงูุฌุฏูู ุจุนุฏ ุงูุชุตููุฉ ุฅูู ุฌูุงุฒู ูุงุณุชุฎุฏุงููุง ูู ุชูุงุฑูุฑู</li>
  <li>ุงุถุบุท ุนูู ุฒุฑ "ุฅูุบุงุก ุงูุชุตููุฉ" ูุฅุนุงุฏุฉ ุงูุชุตููุฉ ุฅูู ุงููุถุน ุงูุงูุชุฑุงุถู.</li>
  <li>ููุงุญุธุฉ: ุจุนุฏ ุงูุฎุฑูุฌ ูู ุตูุญุฉ ุงููุธุงู
     ูู ูุชู ุญูุธ ุฃู ุจูุงูุงุช!</li>
  <li>
    ุฅุฐุง ุฃุฑุฏุช ุชุฌุฑุจุฉ ุงููุธุงู ูุจู ุฑูุน ุจูุงูุงุชูุ ููููู ุชุญููู ููู ุชุฌุฑูุจู ุฌุงูุฒ ูู ููุง:  
    <a href="https://drive.google.com/uc?export=download&id=1Lc8HS9agqWblN6jgnUpteULbl_VVU8ab" target="_blank" class="text-blue-600 underline">๐ฅ ุชุญููู ููู ุชุฌุฑูุจู ุจุตูุบุฉ CSV</a>
  </li>
</ol>

<h3 class="mt-4 font-semibold">๐ ููุฒูุฏ ูู ุงูุงุณุชูุณุงุฑ ุงูุชูุงุตู ูุน ุงููุจุฑูุฌ:</h3>
<p class="text-sm">
  ุงูุงุณู: ู. ููุงู ุงูุฎุทุงุจู<br>
  ุฑูู ุงููุงุชู: +967-781414133<br>
  ุงูุจุฑูุฏ ุงูุฅููุชุฑููู: <a href="mailto:kamalalkhtabi@gmail.com" class="text-blue-600 underline">kamalalkhtabi@gmail.com</a>
</p>

<button id="closeHelp" class="mt-6 bg-red-100 text-red-600 px-4 py-2 rounded hover:bg-red-200 text-sm">ุฅุบูุงู</button>
        </div>
    </div>
</body>
</html>
